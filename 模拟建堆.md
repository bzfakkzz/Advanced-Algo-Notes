#### O(logN)复杂度建随机访问堆：

> 每加入一个数，插入到lower_bound的位置



[L3-002 特殊堆栈 - 团体程序设计天梯赛-练习集 (pintia.cn)](https://pintia.cn/problem-sets/994805046380707840/exam/problems/type/7?problemSetProblemId=994805053695574016&page=1)



分析：



每加入一个数，插入到lower_bound的位置` // x加入到>=x数字的后面`



```cpp
void solve()
{
    cin>>n;

    while(n--)
    {
        cin>>op;

        if(op=="Push")
        {
            cin>>x;

            a.emplace_back(x);

            auto it=lower_bound(alls(b),x);

            b.insert(it,x);
        }
        else if(op=="PeekMedian")
        {
            if(a.empty())
            {
                puts("Invalid");
            }
            else
            {
                if(a.size()&1)x=(a.size()+1)/2;
                else x=a.size()/2;

                cout<<*(b.begin()+x-1)<<endl;
            }
        }
        else
        {
            if(a.empty())puts("Invalid");
            else
            {
                x=a.back(); a.pop_back(); cout<<x<<endl;

                auto it=lower_bound(alls(b),x);

                b.erase(it);
            }
        }
    }    
}
```





[L2-012 关于堆的判断 - 团体程序设计天梯赛-练习集 (pintia.cn)](https://pintia.cn/problem-sets/994805046380707840/exam/problems/994805064676261888?type=7&page=1)



建立小根堆，q次询问



分析：



如果它有更大的就往上走，保证根是最小的



```cpp
void solve()
{
    cin>>n>>m;

    for(int i=1;i<=n;i++)
    {
        cin>>heap[i];

        cur=i;

        while(cur!=1&&heap[cur]<heap[cur/2])
        {
            swap(heap[cur],heap[cur/2]); cur/=2;
        }
    }

    int a,b;

    for(int i=1;i<=m;i++)
    {
        cin>>x>>s;

        if(s=="and")
        {
            cin>>y>>s>>s;

            if(x>y)swap(x,y);

            a=1,b=1;

            while(a<=n&&heap[a]<x)a++;
            while(b<=n&&heap[b]<y)b++;

            if(b<=n&&b-a==1)T; else F;
        }
        else
        {
            cin>>s;

            if(s=="a")
            {
                cin>>s>>s>>y;

                a=1;

                while(a<=n&&heap[a]<x)a++;

                if(a<=n&&heap[a/2]==y)T; else F;
            }   
            else 
            {
                cin>>s;

                if(s=="root")
                {
                    if(heap[1]==x)T; else F;
                }
                else
                {
                    cin>>s>>y;

                    b=1;

                    while(b<=n&&heap[b]<y)b++;

                    if(b<=n&&heap[b/2]==x)T; else F;
                }
            }         
        }
    }
}
```



```cpp
#include <bits/stdc++.h>

#define T cout<<"T"
#define F cout<<"F"

using namespace std;

const int N = 2010;

int n, m;
int cur, curr;
int a, b;
string s;
int heap[N];

int main()
{
    cin >> n >> m;

    for (int i = 1; i <= n; i++)
    {
        cin >> heap[i];

        cur = i;

        while (cur != 1 && heap[cur] < heap[cur / 2])
        {
            swap(heap[cur], heap[cur / 2]);

            cur /= 2;
        }
    }

    for (int i = 1; i <= m; i++)
    {
        cin >> a >> s; // 1

        if (s == "and")
        {
            cin >> b >> s >> s;  // 2 3

            cur = curr = 1;

            while (cur<=n&&heap[cur] != a)cur++;

            while (curr <= n && heap[curr] != b)curr++;

            if (cur <= n && curr <= n && cur / 2 == curr / 2)T;
            else F;
        }
        else
        {
            cin >> s; // 2

            if (s == "a")
            {
                cin >> s >> s >> b;  // 3 4

                cur = 1;

                while (cur <= n && heap[cur] != a)cur++;

                if (cur <= n && heap[cur / 2] == b)T;
                else F;
            }
            else
            {
                cin >> s;  // 3

                if (s == "root")
                {
                    if (heap[1] == a)T;
                    else F;
                }
                else
                {
                    cin >> s >> b;  // 4

                    cur = 1;

                    while (cur <= n && heap[cur] != b)cur++;

                    if (cur <= n && heap[cur / 2] == a)T;
                    else F;
                }
            }
        }

        if (i == m)break;

        puts("");
    }

    return 0;
}
```
